# 단위 테스트

## 수동 테스트 VS 자동화된 테스트

- 수동 테스트 : 사람이 최종적으로 확인해야 하는 테스트
- 자동화 테스트 : 기계가 직접 검증해주는 자동화된 테스트

### 요구사항

- 주문 목록에 음료 추가/삭제 기능
- 주문 목록 전체 지우기
- 주문 목록 총 금액 계산하기
- 주문 생성하기

## 단위테스트

- 작은 코드 단위를 독립적으로 검증하는 테스트
    - 작은 코드 단위 → 클래스 or 메서드
    - 독립적 → 외부 상횡에 의존하는 테스트가 아닌 딱 그 클래스나 메소드만 검증할 수 있는 가장 작은 단위
- 검증 속도가 빠르고, 안정적이다.

## Junit 5

- 단위 테스트를 위한 테스트 프레임워크
- XUnit - Kent Beck
    - SUnit(Smalltalk), JUnit(Java), nUnit(.NET) 등등

## AssertJ

- 테스트 코드 작성을 원활하게 돕는 테스트 라이브러리
- 풍부한 API, 메서드 체이닝 지원

## 테스트 케이스 세분화 하기

### 요구사항 추가

- 한 종류의 음료 여러 잔을 한 번에 담는 기능

### 질문하기

- 암묵적이거나 아직 드러나지 않은 요구사항이 있는가?

### 해피 케이스

- 요구사항을 그대로 만족하는 케이스

### 예외 케이스

- 요구사항 외 암묵적이거나 아직 드러나지 않은 요구사항

### 경계값 테스트

- 해피 케이스 + 예외 케이스 → 범위(이상, 이하, 초과, 미만), 구간, 날짜 등
## 테스트하기 어려운 영역을 분리하기

### 요구사항 추가

- 가게 운영 시간(10:00 ~ 22:00) 외에는 주문을 생성할 수 없다.

### 테스트하기 어려운 영역을 구분하고 분리하기

- 테스트 상에서 원하는 값을 넣어줄 수 있도록 설계를 변경하는 것이 중요하다.
- 외부로 분리할수록 테스트 가능한 코드는 많아진다.

### 테스트하기 어려운 영역

- 관측할 때마다 다른 값에 의존하는 코드
  - 현재 날짜/시간, 랜덤 값, 전역 변수/함수, 사용자 입력 등
- 외부 세계에 영향을 주는 코드
  - 표준 출력, 메시지 발송, 데이터베이스에 기록하기 등

### 순수함수

- 같은 입력에는 항상 같은 결과
- 외부 세상과 단절된 형태
- 테스트하기 쉬운 코드